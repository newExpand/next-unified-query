# Installation

next-unified-query 라이브러리를 시작하기 위한 설치 가이드입니다.

## 패키지 설치

선호하는 패키지 매니저를 사용하여 next-unified-query를 설치하세요:

```bash
# npm
npm install next-unified-query

# yarn
yarn add next-unified-query

# pnpm
pnpm add next-unified-query
```

## 시스템 요구사항

next-unified-query를 사용하기 위한 최소 요구사항:

- **Node.js**: 18.17.0 이상
- **React**: 18.3.1 이상
- **React DOM**: 18.3.1 이상
- **TypeScript**: 5.0 이상 (선택사항이지만 권장)

## Peer Dependencies

React 패키지들은 peer dependencies로 설정되어 있으므로, 프로젝트에 이미 설치되어 있지 않다면 함께 설치해야 합니다:

```bash
# npm
npm install react@^18.3.1 react-dom@^18.3.1

# yarn
yarn add react@^18.3.1 react-dom@^18.3.1

# pnpm
pnpm add react@^18.3.1 react-dom@^18.3.1
```

## Import 경로

next-unified-query는 서버와 클라이언트 환경에 따라 다른 import 경로를 제공합니다:

### React Hooks (클라이언트 컴포넌트)

```typescript
// React hooks는 반드시 /react 경로에서 import
import { useQuery, useMutation, QueryClientProvider } from 'next-unified-query/react';
```

### 유틸리티 함수 및 타입 (서버/클라이언트 공용)

```typescript
// 유틸리티 함수와 타입은 메인 경로에서 import
import { 
  getQueryClient,
  createQueryFactory,
  createMutationFactory,
  ssrPrefetch 
} from 'next-unified-query';

// 타입 정의
import type { 
  QueryConfig,
  MutationConfig,
  QueryObserverResult 
} from 'next-unified-query';
```

### 레거시 HTTP 메서드 (고급 사용)

```typescript
// 직접적인 HTTP 요청이 필요한 경우
import { get, post, put, del } from 'next-unified-query';
```

## ESM/CJS 지원

next-unified-query는 ES Modules와 CommonJS를 모두 지원합니다:

```javascript
// ES Modules (권장)
import { useQuery } from 'next-unified-query/react';

// CommonJS
const { useQuery } = require('next-unified-query/react');
```

## TypeScript 설정

TypeScript 프로젝트에서 최적의 타입 지원을 위해 다음 설정을 권장합니다:

```json
{
  "compilerOptions": {
    "strict": true,
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "jsx": "react-jsx",
    "skipLibCheck": true,
    "resolveJsonModule": true
  }
}
```

타입 정의는 패키지에 포함되어 있으므로 별도의 @types 패키지 설치는 필요하지 않습니다.

## 번들러 호환성

next-unified-query는 다음 번들러들과 호환됩니다:

- **Next.js** (14.0.0 이상) - 완벽 지원
- **Webpack** - 기본 설정으로 작동
- **Vite** - 기본 설정으로 작동
- **Turbopack** - Next.js와 함께 지원

특별한 번들러 설정은 필요하지 않습니다.

## 설치 확인

설치가 올바르게 되었는지 확인하려면 다음 코드를 실행해보세요:

```typescript
// app/test-installation/page.tsx
import { getQueryClient } from 'next-unified-query';

export default function TestPage() {
  const client = getQueryClient();
  
  return (
    <div>
      <h1>Installation Successful!</h1>
      <p>QueryClient initialized: {client ? '✅' : '❌'}</p>
    </div>
  );
}
```

클라이언트 컴포넌트에서 React hooks 테스트:

```typescript
// app/test-hooks/page.tsx
'use client';

import { useQuery } from 'next-unified-query/react';

export default function TestHooksPage() {
  const { data, isPending } = useQuery({
    cacheKey: ['test'],
    url: '/api/test',
  });

  return (
    <div>
      <h1>Hooks Test</h1>
      <p>Status: {isPending ? 'Loading...' : 'Ready'}</p>
      {data && <pre>{JSON.stringify(data, null, 2)}</pre>}
    </div>
  );
}
```

## 문제 해결

### "Module not found" 오류

```bash
# 패키지가 올바르게 설치되었는지 확인
npm list next-unified-query

# node_modules 재설치
rm -rf node_modules package-lock.json
npm install
```

### TypeScript 타입 오류

```bash
# TypeScript 버전 확인
npx tsc --version

# TypeScript 5.0 이상으로 업그레이드
npm install -D typescript@latest
```

### React 버전 충돌

```bash
# React 버전 확인
npm list react react-dom

# 필요시 React 18.3.1 이상으로 업그레이드
npm install react@^18.3.1 react-dom@^18.3.1
```

## 다음 단계

설치가 완료되었다면, [Getting Started](/docs/getting-started) 가이드를 참고하여 첫 번째 쿼리를 만들어보세요!