---
title: Error Handling
description: ìš°ì•„í•œ ì—ëŸ¬ ì²˜ë¦¬ë¡œ ì•ˆì •ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•
---

import { Callout, Card, Cards, Code, Pre, Tabs } from '@/components/ui';

# Error Handling

`next-unified-query`ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´ìœ¼ë¡œ ì•ˆì •ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ì„¸ìš”.

## ê¸°ë³¸ ì—ëŸ¬ ì²˜ë¦¬

### ì¿¼ë¦¬ ì—ëŸ¬ ì²˜ë¦¬

```typescript
import { useQuery } from 'next-unified-query';
import { z } from 'zod';

function UserProfile({ userId }: { userId: string }) {
  const { data, error, isError, isLoading, refetch } = useQuery({
    cacheKey: ['user', userId],
    url: `/api/users/${userId}`,
    schema: UserSchema
  });

  if (isLoading) {
    return <div>ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>;
  }

  if (isError) {
    return (
      <div className="error-container">
        <h3>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h3>
        <p>{error.message}</p>
        <button onClick={() => refetch()}>ë‹¤ì‹œ ì‹œë„</button>
      </div>
    );
  }

  return (
    <div>
      <h1>{data.name}</h1>
      <p>{data.email}</p>
    </div>
  );
}
```

### Mutation ì—ëŸ¬ ì²˜ë¦¬

```typescript
function CreateUserForm() {
  const [formData, setFormData] = useState({ name: '', email: '' });
  
  const createUser = useMutation({
    mutationFn: async (userData: CreateUserInput) => {
      const response = await fetch('/api/users', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userData)
      });
      
      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'ì‚¬ìš©ì ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
      }
      
      return response.json();
    },
    onSuccess: (data) => {
      toast.success('ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤');
      router.push(`/users/${data.id}`);
    },
    onError: (error) => {
      toast.error(error.message);
    }
  });

  return (
    <form onSubmit={(e) => {
      e.preventDefault();
      createUser.mutate(formData);
    }}>
      <input
        value={formData.name}
        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
        placeholder="ì´ë¦„"
      />
      <input
        value={formData.email}
        onChange={(e) => setFormData({ ...formData, email: e.target.value })}
        placeholder="ì´ë©”ì¼"
      />
      <button 
        type="submit" 
        disabled={createUser.isLoading}
      >
        {createUser.isLoading ? 'ìƒì„± ì¤‘...' : 'ì‚¬ìš©ì ìƒì„±'}
      </button>
      
      {createUser.isError && (
        <div className="error-message">
          {createUser.error.message}
        </div>
      )}
    </form>
  );
}
```

## ì—ëŸ¬ íƒ€ì…ë³„ ì²˜ë¦¬

### HTTP ìƒíƒœ ì½”ë“œë³„ ì²˜ë¦¬

```typescript
function DataComponent({ id }: { id: string }) {
  const { data, error, isError } = useQuery({
    cacheKey: ['data', id],
    url: `/api/data/${id}`,
    schema: DataSchema
  });

  if (isError) {
    // HTTP ìƒíƒœ ì½”ë“œë³„ ì²˜ë¦¬
    if (error.status === 404) {
      return (
        <div className="not-found">
          <h2>ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
          <p>ìš”ì²­í•˜ì‹  ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
          <Link href="/data">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</Link>
        </div>
      );
    }
    
    if (error.status === 403) {
      return (
        <div className="forbidden">
          <h2>ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤</h2>
          <p>ì´ ë°ì´í„°ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
      );
    }
    
    if (error.status === 401) {
      return (
        <div className="unauthorized">
          <h2>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h2>
          <Link href="/login">ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™</Link>
        </div>
      );
    }
    
    if (error.status >= 500) {
      return (
        <div className="server-error">
          <h2>ì„œë²„ ì˜¤ë¥˜</h2>
          <p>ì¼ì‹œì ì¸ ì„œë²„ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
          <button onClick={() => window.location.reload()}>
            í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
          </button>
        </div>
      );
    }
    
    // ê¸°íƒ€ ì—ëŸ¬
    return (
      <div className="general-error">
        <h2>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
        <p>{error.message}</p>
      </div>
    );
  }

  return <DataDisplay data={data} />;
}
```

### ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì²˜ë¦¬

```typescript
function NetworkErrorHandler({ children }: { children: ReactNode }) {
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);
    
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);
  
  if (!isOnline) {
    return (
      <div className="offline-banner">
        <p>ì¸í„°ë„· ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
      </div>
    );
  }
  
  return <>{children}</>;
}

// ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ê°ì§€ ì¿¼ë¦¬
function useNetworkAwareQuery(options: QueryOptions) {
  return useQuery({
    ...options,
    retry: (failureCount, error) => {
      // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ë” ë§ì´ ì¬ì‹œë„
      if (error.name === 'NetworkError' || error.code === 'NETWORK_ERROR') {
        return failureCount < 5;
      }
      // ì¼ë°˜ ì˜¤ë¥˜ëŠ” 3ë²ˆë§Œ ì¬ì‹œë„
      return failureCount < 3;
    },
    retryDelay: (attemptIndex, error) => {
      // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ë” ê¸´ ë”œë ˆì´
      if (error.name === 'NetworkError') {
        return Math.min(1000 * 2 ** attemptIndex, 30000);
      }
      return Math.min(1000 * 2 ** attemptIndex, 10000);
    }
  });
}
```

## ì¬ì‹œë„ ì „ëµ

### ì»¤ìŠ¤í…€ ì¬ì‹œë„ ë¡œì§

```typescript
// ì¬ì‹œë„ ì„¤ì • í•¨ìˆ˜
function createRetryConfig(maxRetries: number = 3) {
  return {
    retry: (failureCount: number, error: any) => {
      // í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ (4xx)ëŠ” ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ
      if (error.status >= 400 && error.status < 500) {
        return false;
      }
      
      // ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ í™•ì¸
      return failureCount < maxRetries;
    },
    retryDelay: (attemptIndex: number) => {
      // ì§€ìˆ˜ ë°±ì˜¤í”„: 1ì´ˆ, 2ì´ˆ, 4ì´ˆ, 8ì´ˆ...
      return Math.min(1000 * 2 ** attemptIndex, 30000);
    }
  };
}

// ì‚¬ìš© ì˜ˆì‹œ
function CriticalData() {
  const { data, error, isError } = useQuery({
    cacheKey: ['critical-data'],
    url: '/api/critical-data',
    schema: CriticalDataSchema,
    ...createRetryConfig(5) // ìµœëŒ€ 5ë²ˆ ì¬ì‹œë„
  });
  
  return (
    <div>
      {isError ? (
        <div>ë°ì´í„° ë¡œë”© ì‹¤íŒ¨: {error.message}</div>
      ) : (
        <div>{data?.content}</div>
      )}
    </div>
  );
}
```

### ì¡°ê±´ë¶€ ì¬ì‹œë„

```typescript
function ConditionalRetryQuery() {
  const [retryCount, setRetryCount] = useState(0);
  
  const { data, error, refetch } = useQuery({
    cacheKey: ['conditional-data'],
    url: '/api/conditional-data',
    schema: DataSchema,
    retry: false, // ìë™ ì¬ì‹œë„ ë¹„í™œì„±í™”
    onError: (error) => {
      setRetryCount(prev => prev + 1);
    }
  });

  const handleManualRetry = () => {
    if (retryCount < 3) {
      refetch();
    } else {
      // 3ë²ˆ ì‹¤íŒ¨ í›„ì—ëŠ” ì‚¬ìš©ìì—ê²Œ í™•ì¸ ìš”ì²­
      const shouldRetry = window.confirm(
        'ì—¬ëŸ¬ ë²ˆ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê³„ì† ì‹œë„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?'
      );
      if (shouldRetry) {
        setRetryCount(0);
        refetch();
      }
    }
  };

  if (error) {
    return (
      <div>
        <p>ì˜¤ë¥˜: {error.message}</p>
        <p>ì¬ì‹œë„ íšŸìˆ˜: {retryCount}/3</p>
        <button onClick={handleManualRetry}>
          {retryCount >= 3 ? 'ê°•ì œ ì¬ì‹œë„' : 'ë‹¤ì‹œ ì‹œë„'}
        </button>
      </div>
    );
  }

  return <div>{data?.content}</div>;
}
```

## ê¸€ë¡œë²Œ ì—ëŸ¬ ì²˜ë¦¬

### QueryClient ê¸€ë¡œë²Œ ì„¤ì •

```typescript
// QueryClient ê¸€ë¡œë²Œ ì—ëŸ¬ í•¸ë“¤ëŸ¬
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      onError: (error: any) => {
        // ê¸€ë¡œë²Œ ì—ëŸ¬ ë¡œê¹…
        console.error('Query Error:', {
          message: error.message,
          status: error.status,
          timestamp: new Date().toISOString()
        });
        
        // ì¸ì¦ ì—ëŸ¬ ì²˜ë¦¬
        if (error.status === 401) {
          // í† í° ë§Œë£Œ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
          window.location.href = '/login';
          return;
        }
        
        // ì„œë²„ ì—ëŸ¬ ì•Œë¦¼
        if (error.status >= 500) {
          toast.error('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        }
      }
    },
    mutations: {
      onError: (error: any) => {
        console.error('Mutation Error:', error);
        
        // Mutation ì—ëŸ¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ í‘œì‹œ
        toast.error(error.message || 'ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
      }
    }
  }
});
```

### Error Boundary í†µí•©

```typescript
// React Error Boundaryì™€ í†µí•©
class QueryErrorBoundary extends Component<
  { children: ReactNode; fallback?: ComponentType<{ error: Error }> },
  { hasError: boolean; error: Error | null }
> {
  constructor(props: any) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: any) {
    // ì—ëŸ¬ ë¡œê¹… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
    console.error('Query Error Boundary:', error, errorInfo);
    
    // Sentry, LogRocket ë“±ìœ¼ë¡œ ì—ëŸ¬ ë¦¬í¬íŒ…
    // Sentry.captureException(error, { extra: errorInfo });
  }

  render() {
    if (this.state.hasError) {
      const FallbackComponent = this.props.fallback || DefaultErrorFallback;
      return <FallbackComponent error={this.state.error!} />;
    }

    return this.props.children;
  }
}

function DefaultErrorFallback({ error }: { error: Error }) {
  return (
    <div className="error-boundary">
      <h2>ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜</h2>
      <p>ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
      <details>
        <summary>ì˜¤ë¥˜ ìƒì„¸ ì •ë³´</summary>
        <pre>{error.message}</pre>
      </details>
      <button onClick={() => window.location.reload()}>
        í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
      </button>
    </div>
  );
}

// ì‚¬ìš©
function App() {
  return (
    <NextUnifiedQueryProvider client={queryClient}>
      <QueryErrorBoundary>
        <Router />
      </QueryErrorBoundary>
    </NextUnifiedQueryProvider>
  );
}
```

## ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ UI

### ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì»´í¬ë„ŒíŠ¸

```typescript
// í†µí•© ìƒíƒœ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
interface QueryStateProps<T> {
  query: UseQueryResult<T>;
  loading?: ReactNode;
  error?: (error: Error) => ReactNode;
  empty?: ReactNode;
  children: (data: T) => ReactNode;
}

function QueryState<T>({ 
  query, 
  loading, 
  error, 
  empty, 
  children 
}: QueryStateProps<T>) {
  const { data, isLoading, isError, error: queryError } = query;

  if (isLoading) {
    return <>{loading || <DefaultLoading />}</>;
  }

  if (isError) {
    return <>{error ? error(queryError) : <DefaultError error={queryError} />}</>;
  }

  if (!data || (Array.isArray(data) && data.length === 0)) {
    return <>{empty || <DefaultEmpty />}</>;
  }

  return <>{children(data)}</>;
}

// ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ë“¤
function DefaultLoading() {
  return (
    <div className="flex items-center justify-center py-8">
      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <span className="ml-2">ë¡œë”© ì¤‘...</span>
    </div>
  );
}

function DefaultError({ error }: { error: Error }) {
  return (
    <div className="error-state p-4 border border-red-300 rounded-lg bg-red-50">
      <h3 className="text-red-800 font-semibold">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h3>
      <p className="text-red-600 mt-1">{error.message}</p>
    </div>
  );
}

function DefaultEmpty() {
  return (
    <div className="empty-state text-center py-8 text-gray-500">
      <p>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</p>
    </div>
  );
}

// ì‚¬ìš© ì˜ˆì‹œ
function UserList() {
  const usersQuery = useQuery({
    cacheKey: ['users'],
    url: '/api/users',
    schema: z.array(UserSchema)
  });

  return (
    <QueryState
      query={usersQuery}
      loading={<div>ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>}
      error={(error) => (
        <div>
          <h3>ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
          <p>{error.message}</p>
        </div>
      )}
      empty={<div>ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤</div>}
    >
      {(users) => (
        <div className="user-grid">
          {users.map(user => (
            <UserCard key={user.id} user={user} />
          ))}
        </div>
      )}
    </QueryState>
  );
}
```

### ì¸ë¼ì¸ ì—ëŸ¬ ë©”ì‹œì§€

```typescript
// í¼ ë‚´ ì—ëŸ¬ í‘œì‹œ
function UpdateUserForm({ userId }: { userId: string }) {
  const [formData, setFormData] = useState({ name: '', email: '' });
  const [fieldErrors, setFieldErrors] = useState<Record<string, string>>({});

  const updateUser = useMutation({
    mutationFn: async (data: UpdateUserInput) => {
      const response = await fetch(`/api/users/${userId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (!response.ok) {
        const errorData = await response.json();
        
        // í•„ë“œë³„ ì—ëŸ¬ ì²˜ë¦¬
        if (errorData.fieldErrors) {
          setFieldErrors(errorData.fieldErrors);
        }
        
        throw new Error(errorData.message || 'ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
      }

      return response.json();
    },
    onSuccess: () => {
      setFieldErrors({});
      toast.success('ì‚¬ìš©ì ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤');
    },
    onError: (error) => {
      if (!fieldErrors.name && !fieldErrors.email) {
        toast.error(error.message);
      }
    }
  });

  return (
    <form onSubmit={(e) => {
      e.preventDefault();
      updateUser.mutate(formData);
    }}>
      <div className="form-field">
        <label>ì´ë¦„</label>
        <input
          value={formData.name}
          onChange={(e) => setFormData({ ...formData, name: e.target.value })}
          className={fieldErrors.name ? 'error' : ''}
        />
        {fieldErrors.name && (
          <span className="field-error">{fieldErrors.name}</span>
        )}
      </div>

      <div className="form-field">
        <label>ì´ë©”ì¼</label>
        <input
          value={formData.email}
          onChange={(e) => setFormData({ ...formData, email: e.target.value })}
          className={fieldErrors.email ? 'error' : ''}
        />
        {fieldErrors.email && (
          <span className="field-error">{fieldErrors.email}</span>
        )}
      </div>

      <button type="submit" disabled={updateUser.isLoading}>
        {updateUser.isLoading ? 'ì—…ë°ì´íŠ¸ ì¤‘...' : 'ì—…ë°ì´íŠ¸'}
      </button>
    </form>
  );
}
```

## ì—ëŸ¬ ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

### êµ¬ì¡°í™”ëœ ì—ëŸ¬ ë¡œê¹…

```typescript
// ì—ëŸ¬ ë¡œê¹… ìœ í‹¸ë¦¬í‹°
interface ErrorLogData {
  type: 'query' | 'mutation';
  operation: string;
  error: Error;
  context?: Record<string, any>;
  userId?: string;
  timestamp: string;
}

function logError(data: ErrorLogData) {
  // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì½˜ì†”ì— ì¶œë ¥
  if (process.env.NODE_ENV === 'development') {
    console.group(`ğŸš¨ ${data.type.toUpperCase()} Error: ${data.operation}`);
    console.error('Error:', data.error);
    console.log('Context:', data.context);
    console.log('Timestamp:', data.timestamp);
    console.groupEnd();
  }

  // í”„ë¡œë•ì…˜ì—ì„œëŠ” ë¡œê¹… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
  if (process.env.NODE_ENV === 'production') {
    // Sentry, LogRocket, DataDog ë“±ìœ¼ë¡œ ì „ì†¡
    // analyticsService.track('error', data);
  }
}

// QueryClientì— ë¡œê¹… í†µí•©
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      onError: (error, query) => {
        logError({
          type: 'query',
          operation: `Query: ${query.queryKey.join('/')}`,
          error,
          context: {
            queryKey: query.queryKey,
            variables: query.meta?.variables
          },
          userId: getCurrentUserId(),
          timestamp: new Date().toISOString()
        });
      }
    },
    mutations: {
      onError: (error, variables, context, mutation) => {
        logError({
          type: 'mutation',
          operation: `Mutation: ${mutation.options.mutationKey?.join('/') || 'unknown'}`,
          error,
          context: {
            variables,
            mutationKey: mutation.options.mutationKey
          },
          userId: getCurrentUserId(),
          timestamp: new Date().toISOString()
        });
      }
    }
  }
});
```

### ì—ëŸ¬ ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘

```typescript
// ì—ëŸ¬ ë©”íŠ¸ë¦­ìŠ¤ í›…
function useErrorMetrics() {
  const [errorStats, setErrorStats] = useState({
    totalErrors: 0,
    queryErrors: 0,
    mutationErrors: 0,
    networkErrors: 0,
    lastError: null as Error | null
  });

  useEffect(() => {
    const queryClient = getQueryClient();
    
    const unsubscribe = queryClient.getQueryCache().subscribe((event) => {
      if (event.type === 'queryUpdated' && event.query.state.error) {
        setErrorStats(prev => ({
          ...prev,
          totalErrors: prev.totalErrors + 1,
          queryErrors: prev.queryErrors + 1,
          lastError: event.query.state.error
        }));
      }
    });

    return unsubscribe;
  }, []);

  return errorStats;
}

// ì—ëŸ¬ ëŒ€ì‹œë³´ë“œ
function ErrorDashboard() {
  const errorStats = useErrorMetrics();
  
  return (
    <div className="error-dashboard">
      <h3>ì—ëŸ¬ í†µê³„</h3>
      <div className="error-stats">
        <div>ì´ ì—ëŸ¬: {errorStats.totalErrors}</div>
        <div>ì¿¼ë¦¬ ì—ëŸ¬: {errorStats.queryErrors}</div>
        <div>Mutation ì—ëŸ¬: {errorStats.mutationErrors}</div>
        <div>ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬: {errorStats.networkErrors}</div>
      </div>
      
      {errorStats.lastError && (
        <div className="last-error">
          <h4>ìµœê·¼ ì—ëŸ¬</h4>
          <p>{errorStats.lastError.message}</p>
        </div>
      )}
    </div>
  );
}
```

## ìŠ¤í‚¤ë§ˆ ê²€ì¦ ì—ëŸ¬

### Zod ê²€ì¦ ì—ëŸ¬ ì²˜ë¦¬

```typescript
// ìŠ¤í‚¤ë§ˆ ê²€ì¦ ì—ëŸ¬ ì²˜ë¦¬ í›…
function useSchemaValidatedQuery<T>(options: QueryOptions<T>) {
  return useQuery({
    ...options,
    onError: (error) => {
      if (error instanceof z.ZodError) {
        // Zod ê²€ì¦ ì—ëŸ¬ë¥¼ ì‚¬ìš©ì ì¹œí™”ì ìœ¼ë¡œ ë³€í™˜
        const friendlyErrors = error.errors.map(err => {
          return `${err.path.join('.')}: ${err.message}`;
        }).join(', ');
        
        toast.error(`ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜: ${friendlyErrors}`);
        
        // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ìƒì„¸ ì—ëŸ¬ ë¡œê¹…
        if (process.env.NODE_ENV === 'development') {
          console.error('Schema validation error:', error.errors);
        }
      } else {
        // ì¼ë°˜ ì—ëŸ¬ ì²˜ë¦¬
        if (options.onError) {
          options.onError(error);
        }
      }
    }
  });
}

// ì‚¬ìš© ì˜ˆì‹œ
function ValidatedUserProfile({ userId }: { userId: string }) {
  const { data, error, isError } = useSchemaValidatedQuery({
    cacheKey: ['user', userId],
    url: `/api/users/${userId}`,
    schema: UserSchema
  });

  if (isError) {
    if (error instanceof z.ZodError) {
      return (
        <div className="schema-error">
          <h3>ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜</h3>
          <p>ì„œë²„ì—ì„œ ë°›ì€ ë°ì´í„°ê°€ ì˜ˆìƒ í˜•ì‹ê³¼ ë‹¤ë¦…ë‹ˆë‹¤.</p>
          <ul>
            {error.errors.map((err, index) => (
              <li key={index}>
                {err.path.join('.')}: {err.message}
              </li>
            ))}
          </ul>
        </div>
      );
    }
    
    return <div>ì¼ë°˜ ì˜¤ë¥˜: {error.message}</div>;
  }

  return <UserDisplay user={data} />;
}
```

## ê´€ë ¨ ë¬¸ì„œ

- [Core Hooks](/docs/core-hooks) - ê¸°ë³¸ í›…ì˜ ì—ëŸ¬ ì²˜ë¦¬ ì˜µì…˜
- [API Reference](/docs/api/error-handling) - ì—ëŸ¬ ì²˜ë¦¬ API ë ˆí¼ëŸ°ìŠ¤
- [Best Practices](/docs/best-practices) - ì—ëŸ¬ ì²˜ë¦¬ ëª¨ë²” ì‚¬ë¡€
- [Custom Hooks](/docs/custom-hooks) - ì—ëŸ¬ ì²˜ë¦¬ê°€ í¬í•¨ëœ ì»¤ìŠ¤í…€ í›…