---
title: API Reference Overview
description: Overview of next-unified-query's main APIs and concepts
---

# API Reference Overview

This page provides a high-level overview of next-unified-query's main APIs. For detailed documentation, visit the specific sections linked below.

## Core Hooks

Next-unified-query provides two main React hooks for data fetching:

### useQuery

The primary hook for fetching data with automatic caching and background updates.

```typescript
import { useQuery } from 'next-unified-query/react';

const { data, isLoading, error, refetch } = useQuery({
  cacheKey: ['users'],
  url: '/api/users',
  // ... other options
});
```

**[Complete useQuery Documentation →](/docs/core-hooks#usequery)**

### useMutation

Hook for handling data mutations (POST, PUT, DELETE operations).

```typescript
import { useMutation } from 'next-unified-query/react';

const createUser = useMutation({
  url: '/api/users',
  method: 'POST',
  onSuccess: (data) => {
    console.log('User created:', data);
  },
});
```

**[Complete useMutation Documentation →](/docs/core-hooks#usemutation)**

## Factory Patterns

Create reusable, type-safe API definitions with factory functions:

### createQueryFactory

```typescript
import { createQueryFactory } from 'next-unified-query';

const userQueries = createQueryFactory({
  list: {
    cacheKey: () => ['users'],
    url: () => '/api/users',
    schema: z.array(userSchema),
  },
  getById: {
    cacheKey: (id: number) => ['users', id],
    url: (id: number) => `/api/users/${id}`,
    schema: userSchema,
  },
});
```

**[Complete Factory Documentation →](/docs/factory-patterns)**

### createMutationFactory

```typescript
import { createMutationFactory } from 'next-unified-query';

const userMutations = createMutationFactory({
  create: {
    url: () => '/api/users',
    method: 'POST',
    requestSchema: createUserSchema,
    responseSchema: userSchema,
  },
});
```

## Core Classes

### QueryClient

The central class for managing queries and cache:

```typescript
import { QueryClient } from 'next-unified-query';

const queryClient = new QueryClient({
  baseURL: 'https://api.example.com',
  timeout: 10000,
  queryCache: {
    maxQueries: 1000,
  },
});
```

**[Complete QueryClient Documentation →](/docs/core-hooks#queryclient)**

## HTTP Methods

Direct HTTP method functions for non-React usage:

```typescript
import { get, post, put, patch, del, head, options } from 'next-unified-query';

// Direct API calls
const users = await get('/api/users');
const newUser = await post('/api/users', userData);
const updatedUser = await put('/api/users/1', updateData);
await del('/api/users/1');
```

**[Complete HTTP Methods Documentation →](/docs/http-methods)**

## Configuration

### Global Configuration

```typescript
import { setDefaultQueryClientOptions } from 'next-unified-query';

setDefaultQueryClientOptions({
  baseURL: 'https://api.example.com',
  timeout: 10000,
  queryCache: {
    maxQueries: 1000,
    defaultStaleTime: 60000,
    defaultGcTime: 300000,
  },
});
```

**[Complete Configuration Documentation →](/docs/configuration)**

### Provider Setup

```typescript
import { QueryClientProvider } from 'next-unified-query/react';

export function AppProvider({ children }: { children: React.ReactNode }) {
  return <QueryClientProvider>{children}</QueryClientProvider>;
}
```

**[Complete Provider Documentation →](/docs/providers-and-context)**

## Error Handling

Type-safe error handling utilities:

```typescript
import { isFetchError, hasStatus, isValidationError } from 'next-unified-query';

if (error) {
  if (isFetchError(error)) {
    if (hasStatus(error, 404)) {
      return <div>Not found</div>;
    }
  }
  if (isValidationError(error)) {
    const validationErrors = getValidationErrors(error);
    // Handle validation errors
  }
}
```

**[Complete Error Handling Documentation →](/docs/troubleshooting#error-handling)**

## Type Safety Features

### Schema Validation

```typescript
import { z } from 'next-unified-query';

const userSchema = z.object({
  id: z.number(),
  name: z.string(),
  email: z.string().email(),
});

const { data } = useQuery({
  cacheKey: ['user', id],
  url: `/api/users/${id}`,
  schema: userSchema, // Automatic type inference
});
// data is typed as { id: number; name: string; email: string }
```

### HTTP Method Safety

```typescript
// QueryFetcher - only GET/HEAD methods allowed
const { data } = useQuery({
  cacheKey: ['users'],
  queryFn: async (fetcher) => {
    return fetcher.get('/api/users'); // ✅ Allowed
    // return fetcher.post('/api/users', {}); // ❌ Compile error
  },
});

// NextTypeFetch - all HTTP methods allowed
const createUser = useMutation({
  mutationFn: async (data, fetcher) => {
    return fetcher.post('/api/users', data); // ✅ Allowed
  },
});
```

## Advanced Features

### Interceptors

```typescript
import { createQueryClient } from 'next-unified-query';

const queryClient = createQueryClient({
  setupInterceptors: (fetcher) => {
    // Request interceptor
    fetcher.interceptors.request.use((config) => {
      config.headers = {
        ...config.headers,
        Authorization: `Bearer ${token}`,
      };
      return config;
    });

    // Response interceptor
    fetcher.interceptors.response.use((response) => {
      return response;
    });
  },
});
```

**[Complete Advanced Features Documentation →](/docs/advanced-features)**

## Import Paths

The library provides organized import paths:

```typescript
// Core functionality (works everywhere)
import { QueryClient, createQueryFactory, z } from 'next-unified-query';

// React hooks (client-side only)
import { useQuery, useMutation, QueryClientProvider } from 'next-unified-query/react';

// Direct HTTP methods
import { get, post, put, del } from 'next-unified-query';
```

## Next Steps

Explore detailed documentation for each API:

- **[Core Hooks](/docs/core-hooks)** - Complete hook reference
- **[Factory Patterns](/docs/factory-patterns)** - Reusable API definitions
- **[Configuration](/docs/configuration)** - Setup and configuration
- **[HTTP Methods](/docs/http-methods)** - Direct HTTP API reference
- **[Advanced Features](/docs/advanced-features)** - Interceptors, caching, and more
- **[Troubleshooting](/docs/troubleshooting)** - Common issues and debugging