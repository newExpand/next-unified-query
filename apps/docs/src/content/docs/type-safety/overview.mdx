---
title: Type Safety Overview
description: Next Unified Queryì˜ ê°•ë ¥í•œ íƒ€ì… ì•ˆì „ì„± ê¸°ëŠ¥ì„ ì‚´í´ë³´ì„¸ìš”
---

import { Callout, Card, Cards } from 'fumadocs-ui/components/callout';
import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { CodeBlock } from '@/components/code-block';

# Type Safety Overview

Next Unified QueryëŠ” **ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ì•ˆì „ì„±**ì„ ìµœìš°ì„ ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. TypeScriptì˜ ê°•ë ¥í•œ íƒ€ì… ì‹œìŠ¤í…œì„ í™œìš©í•˜ì—¬ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì‚¬ì „ì— ë°©ì§€í•˜ê³ , ë” ë‚˜ì€ ê°œë°œì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

## ì£¼ìš” íƒ€ì… ì•ˆì „ì„± ê¸°ëŠ¥

<Cards>
  <Card 
    title="HTTP Method Safety" 
    description="useQueryëŠ” GET/HEADë§Œ, useMutationì€ ë‹¤ë¥¸ ë©”ì„œë“œë§Œ í—ˆìš©"
    href="/docs/type-safety/http-methods"
  />
  <Card 
    title="Factory Pattern Types" 
    description="íŒŒë¼ë¯¸í„°ì™€ ì‘ë‹µ íƒ€ì…ì˜ ì™„ë²½í•œ ì¶”ë¡ "
    href="/docs/type-safety/factory-patterns"
  />
  <Card 
    title="Schema Validation" 
    description="Zod ìŠ¤í‚¤ë§ˆì™€ TypeScript íƒ€ì…ì˜ ì™„ë²½í•œ í†µí•©"
    href="/docs/type-safety/schema-validation"
  />
</Cards>

## ì™œ íƒ€ì… ì•ˆì „ì„±ì´ ì¤‘ìš”í•œê°€?

### 1. ğŸ› ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€

<Tabs items={['ë¬¸ì œ', 'í•´ê²°']}>
  <Tab value="ë¬¸ì œ">
    ```typescript
    // âŒ ëŸ°íƒ€ì„ì— ì‹¤íŒ¨í•  ì½”ë“œ
    const { data } = useQuery({
      url: '/users',
      method: 'POST' // ì‹¤ì œë¡œëŠ” GETë§Œ í—ˆìš©ë¨
    });
    ```
  </Tab>
  <Tab value="í•´ê²°">
    ```typescript
    // âœ… ì»´íŒŒì¼ íƒ€ì„ì— ì—ëŸ¬ ë°œìƒ
    const { data } = useQuery({
      url: '/users',
      // @ts-expect-error: useQuery doesn't support POST
      method: 'POST' 
    });
    ```
  </Tab>
</Tabs>

### 2. ğŸ¯ ìë™ ì™„ì„±ê³¼ IntelliSense

```typescript
// Factory íŒ¨í„´ìœ¼ë¡œ ì •ì˜
const userQueries = createQueryFactory({
  getById: {
    cacheKey: (id: number) => ['users', id],
    url: (id: number) => `/users/${id}`,
    schema: userSchema
  }
});

// ì‚¬ìš© ì‹œ ì™„ë²½í•œ ìë™ ì™„ì„±
const { data } = useQuery(userQueries.getById, { 
  params: { id: 1 } // 'id'ê°€ number íƒ€ì…ìœ¼ë¡œ ìë™ ì¶”ë¡ 
});
```

### 3. ğŸ”„ ë¦¬íŒ©í† ë§ ì•ˆì „ì„±

ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•˜ë©´ ê´€ë ¨ëœ ëª¨ë“  ì½”ë“œì—ì„œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ë†“ì¹˜ëŠ” ë¶€ë¶„ ì—†ì´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í•µì‹¬ íƒ€ì… ì•ˆì „ì„± ê¸°ëŠ¥ ìƒì„¸

### HTTP Method Safety

Next Unified QueryëŠ” **ì¿¼ë¦¬ì™€ ë®¤í…Œì´ì…˜ì„ ëª…í™•íˆ êµ¬ë¶„**í•˜ì—¬ ì˜ë„í•˜ì§€ ì•Šì€ ë¶€ì‘ìš©ì„ ë°©ì§€í•©ë‹ˆë‹¤.

<CodeBlock>
```typescript
// QueryFetcher ì¸í„°í˜ì´ìŠ¤ - GET/HEADë§Œ í—ˆìš©
interface QueryFetcher {
  get<T = unknown>(url: string, config?: FetchConfig): Promise<Response<T>>;
  head<T = unknown>(url: string, config?: FetchConfig): Promise<Response<T>>;
  request<T = unknown>(
    config: { method?: "GET" | "HEAD" } & RequestConfig
  ): Promise<Response<T>>;
}

// NextTypeFetch ì¸í„°í˜ì´ìŠ¤ - ëª¨ë“  ë©”ì„œë“œ í—ˆìš©
interface NextTypeFetch extends QueryFetcher {
  post<T = unknown>(url: string, data?: unknown, config?: FetchConfig): Promise<Response<T>>;
  put<T = unknown>(url: string, data?: unknown, config?: FetchConfig): Promise<Response<T>>;
  delete<T = unknown>(url: string, config?: FetchConfig): Promise<Response<T>>;
  patch<T = unknown>(url: string, data?: unknown, config?: FetchConfig): Promise<Response<T>>;
  // ... ê¸°íƒ€ ë©”ì„œë“œ
}
```
</CodeBlock>

<Callout type="info">
ì´ëŸ¬í•œ íƒ€ì… ë¶„ë¦¬ëŠ” ë°ì´í„° ì¡°íšŒì™€ ë³€ê²½ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ ìºì‹œ ì˜¤ì—¼ì„ ë°©ì§€í•˜ê³ , ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„í•©ë‹ˆë‹¤.
</Callout>

### Factory Pattern Type Inference

Factory íŒ¨í„´ì€ **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ API ì •ì˜**ë¥¼ ë§Œë“¤ë©´ì„œë„ **ì™„ë²½í•œ íƒ€ì… ì¶”ë¡ **ì„ ì œê³µí•©ë‹ˆë‹¤.

```typescript
// 1. Factory ì •ì˜
const postQueries = createQueryFactory({
  list: {
    cacheKey: (filters?: PostFilters) => ['posts', filters],
    url: (filters?: PostFilters) => '/posts',
    params: (filters?: PostFilters) => filters,
    schema: z.array(postSchema)
  },
  getById: {
    cacheKey: (id: string) => ['posts', id],
    url: (id: string) => `/posts/${id}`,
    schema: postSchema
  }
});

// 2. ì‚¬ìš© ì‹œ íƒ€ì… ìë™ ì¶”ë¡ 
const { data } = useQuery(postQueries.list);
// dataëŠ” Post[] íƒ€ì…ìœ¼ë¡œ ìë™ ì¶”ë¡ 

const { data: post } = useQuery(postQueries.getById, { 
  params: { id: "123" } // idëŠ” string íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ 
});
// postëŠ” Post íƒ€ì…ìœ¼ë¡œ ìë™ ì¶”ë¡ 
```

### Zod Schema Integration

**ëŸ°íƒ€ì„ ê²€ì¦ê³¼ ì»´íŒŒì¼ íƒ€ì„ íƒ€ì…ì´ ì™„ë²½íˆ ì¼ì¹˜**í•©ë‹ˆë‹¤.

```typescript
// ìŠ¤í‚¤ë§ˆ ì •ì˜
const userSchema = z.object({
  id: z.number(),
  name: z.string(),
  email: z.string().email(),
  role: z.enum(['admin', 'user', 'guest'])
});

// íƒ€ì… ìë™ ìƒì„±
type User = z.infer<typeof userSchema>;

// Factoryì—ì„œ ì‚¬ìš©
const userQueries = createQueryFactory({
  getProfile: {
    cacheKey: () => ['profile'],
    url: () => '/api/profile',
    schema: userSchema // ì‘ë‹µì´ ìë™ìœ¼ë¡œ User íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ 
  }
});

// ì‚¬ìš© ì‹œ
const { data } = useQuery(userQueries.getProfile);
if (data) {
  // dataëŠ” User íƒ€ì…
  console.log(data.role); // 'admin' | 'user' | 'guest'
}
```

## íƒ€ì… ì•ˆì „ì„±ì˜ ì‹¤ì œ ì´ì 

### 1. ê°œë°œ ì†ë„ í–¥ìƒ
- ìë™ ì™„ì„±ìœ¼ë¡œ API ë¬¸ì„œë¥¼ ì°¾ì•„ë³¼ í•„ìš” ì—†ìŒ
- íƒ€ì… ì—ëŸ¬ë¡œ ì¦‰ì‹œ í”¼ë“œë°± ë°›ìŒ

### 2. ë²„ê·¸ ê°ì†Œ
- ì˜ëª»ëœ HTTP ë©”ì„œë“œ ì‚¬ìš© ë°©ì§€
- íŒŒë¼ë¯¸í„° íƒ€ì… ë¶ˆì¼ì¹˜ ë°©ì§€
- ì‘ë‹µ ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜ ë°©ì§€

### 3. ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- API ë³€ê²½ ì‹œ ì˜í–¥ë°›ëŠ” ëª¨ë“  ì½”ë“œ ì¦‰ì‹œ íŒŒì•…
- ë¦¬íŒ©í† ë§ ì‹œ ì•ˆì „ì„± ë³´ì¥

## íƒ€ì… ê²€ì¦ ì˜ˆì œ

ìš°ë¦¬ëŠ” ì‹¤ì œë¡œ íƒ€ì… ì•ˆì „ì„±ì„ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤:

<Tabs items={['HTTP Methods', 'Factory Types', 'Schema Validation']}>
  <Tab value="HTTP Methods">
    ```typescript
    // âœ… useQueryëŠ” GET/HEADë§Œ í—ˆìš©
    const queryFetcher = {} as QueryFetcher;
    queryFetcher.get('/users'); // OK
    queryFetcher.head('/users'); // OK
    
    // âŒ POSTëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŒ
    // @ts-expect-error
    queryFetcher.post('/users', data);
    ```
  </Tab>
  <Tab value="Factory Types">
    ```typescript
    const api = createQueryFactory({
      getUser: {
        cacheKey: (id: number) => ['user', id],
        url: (id: number) => `/users/${id}`,
        schema: userSchema
      }
    });
    
    // íŒŒë¼ë¯¸í„° íƒ€ì…ì´ ìë™ìœ¼ë¡œ ì¶”ë¡ ë¨
    type Params = ExtractParams<typeof api.getUser>; // number
    type Data = ExtractQueryData<typeof api.getUser>; // User
    ```
  </Tab>
  <Tab value="Schema Validation">
    ```typescript
    const schema = z.object({
      name: z.string(),
      age: z.number().min(0)
    });
    
    type Person = z.infer<typeof schema>;
    
    // íƒ€ì…ê³¼ ëŸ°íƒ€ì„ ê²€ì¦ì´ ì¼ì¹˜
    const person: Person = {
      name: "John",
      age: 30 // number íƒ€ì… ê°•ì œ
    };
    ```
  </Tab>
</Tabs>

## ì‹œì‘í•˜ê¸°

íƒ€ì… ì•ˆì „ì„± ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©í•˜ë ¤ë©´:

1. **TypeScript ì„¤ì • í™•ì¸**
   ```json
   {
     "compilerOptions": {
       "strict": true,
       "strictNullChecks": true,
       "noImplicitAny": true
     }
   }
   ```

2. **Factory íŒ¨í„´ ì‚¬ìš©**
   - API ì—”ë“œí¬ì¸íŠ¸ë¥¼ Factoryë¡œ ì •ì˜
   - ìŠ¤í‚¤ë§ˆë¥¼ í™œìš©í•œ íƒ€ì… ì¶”ë¡ 

3. **ì˜¬ë°”ë¥¸ í›… ì„ íƒ**
   - ë°ì´í„° ì¡°íšŒ: `useQuery`
   - ë°ì´í„° ë³€ê²½: `useMutation`

<Callout type="success">
Next Unified Queryì˜ íƒ€ì… ì•ˆì „ì„±ì€ ë‹¨ìˆœíˆ ì—ëŸ¬ë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì„ ë„˜ì–´, **ë” ë‚˜ì€ ê°œë°œì ê²½í—˜**ê³¼ **ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ì½”ë“œ**ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
</Callout>